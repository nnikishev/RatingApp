<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:behaviors="clr-namespace:RatingApp.Behaviors"
             x:Class="RatingApp.Views.LoginPage"
             Title="Вход"
             NavigationPage.HasNavigationBar="False">
    
    <Grid>
        <!-- Background Image -->
        <Image Source="login_background.jpg"
               Aspect="AspectFill"
               Opacity="0.8"/>
        
        <!-- Overlay -->
        <BoxView Color="Black" Opacity="0.5"/>
        
        <!-- Login Form -->
        <ScrollView>
            <VerticalStackLayout Spacing="25" 
                               Padding="30"
                               VerticalOptions="Center">
                
                <!-- App Logo/Title -->
                <VerticalStackLayout Spacing="10" HorizontalOptions="Center">
                    <Label Text="App" 
                           FontSize="32" 
                           FontAttributes="Bold" 
                           TextColor="White"
                           HorizontalOptions="Center"/>
                    <Label Text="Войдите чтобы продолжить" 
                           FontSize="16" 
                           TextColor="White"
                           HorizontalOptions="Center"
                           Opacity="0.8"/>
                </VerticalStackLayout>
                
                <!-- Login Form Container -->
                <Frame BackgroundColor="White" 
       CornerRadius="15" 
       Padding="25"
       HasShadow="True"
       Opacity="0.9"> <!-- Уменьшил прозрачность формы -->
    
    <VerticalStackLayout Spacing="20">
        
        <!-- Username Field -->
        <Frame BackgroundColor="White"
               CornerRadius="10"
               Padding="0"
               HasShadow="False"
               Opacity="0.9"> <!-- Повышенная прозрачность для контейнера поля -->
            <VerticalStackLayout Spacing="8">
                <Label Text="Username" 
                       FontSize="14" 
                       FontAttributes="Bold" 
                       TextColor="#495057"/>
                <Entry Text="{Binding Username}"
                       Placeholder="Enter your username"
                       BackgroundColor="#FFFFFF"
                       TextColor="#212529"
                       HeightRequest="50"
                       ClearButtonVisibility="WhileEditing">
                    <Entry.Behaviors>
                        <behaviors:TextChangedBehavior 
                            Command="{Binding ClearErrorCommand}"/>
                    </Entry.Behaviors>
                </Entry>
            </VerticalStackLayout>
        </Frame>
        
        <!-- Password Field -->
        <Frame BackgroundColor="White"
               CornerRadius="10"
               Padding="0"
               HasShadow="False"
               Opacity="0.9"> <!-- Повышенная прозрачность для контейнера поля -->
            <VerticalStackLayout Spacing="8">
                <Label Text="Password" 
                       FontSize="14" 
                       FontAttributes="Bold" 
                       TextColor="#495057"/>
                <Entry Text="{Binding Password}"
                       Placeholder="Enter your password"
                       BackgroundColor="#FFFFFF"
                       TextColor="#212529"
                       IsPassword="True"
                       HeightRequest="50"
                       ClearButtonVisibility="WhileEditing">
                    <Entry.Behaviors>
                        <behaviors:TextChangedBehavior 
                            Command="{Binding ClearErrorCommand}"/>
                    </Entry.Behaviors>
                </Entry>
            </VerticalStackLayout>
        </Frame>
        
        <!-- Error Message -->
        <Label Text="{Binding ErrorMessage}"
               FontSize="14"
               TextColor="#DC3545"
               HorizontalOptions="Center"
               IsVisible="{Binding IsLoginFailed}"
               BackgroundColor="White"
               Opacity="0.9"/> <!-- Фон для ошибки -->
        
        <!-- Login Button -->
        <Button Text="Войти" 
                Command="{Binding LoginCommand}"
                BackgroundColor="gray"
                TextColor="White"
                FontSize="16"
                FontAttributes="Bold"
                HeightRequest="50"
                CornerRadius="10"
                Margin="0,10,0,0"
                Opacity="0.9"/> <!-- Немного прозрачности для кнопки -->
        
    </VerticalStackLayout>
</Frame>

                
                <!-- Loading Indicator -->
                <ActivityIndicator IsVisible="{Binding IsBusy}"
                                  IsRunning="{Binding IsBusy}"
                                  HorizontalOptions="Center"
                                  Color="White"
                                  Scale="1.5"/>
                
            </VerticalStackLayout>
        </ScrollView>
        
    </Grid>
    
</ContentPage>